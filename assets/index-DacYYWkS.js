(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();class c{constructor(t,i,o,e,s){this.x=t,this.y=i,this.width=o,this.height=e,this.moveX=0,this.moveY=0,this.jumpForce=-15,this.game=s,this.facingLeft=!1,this.PlayerDiv=document.getElementById("player"),this.image=this.PlayerDiv.querySelector("img"),this.PlayerDiv.style.width=o+"px",this.PlayerDiv.style.height=e+"px",this.updatePosition(),this.keys={},this.setupInputHandlers()}setupInputHandlers(){window.addEventListener("keydown",t=>{this.keys[t.code]=!0}),window.addEventListener("keyup",t=>{this.keys[t.code]=!1})}handleInput(){this.keys.ArrowLeft?this.moveX=-3:this.keys.ArrowRight?this.moveX=3:this.moveX=0}updatePosition(){this.PlayerDiv.style.left=this.x+"px",this.PlayerDiv.style.top=this.y+"px"}update(){this.handleInput(),this.moveY+=this.game.gravity,this.x+=this.moveX,this.y+=this.moveY;const t="/Doodle-Jump-Clone/";this.moveX<0?this.image.src=`${t}/assets/doodleLeft.png`:this.moveX>0&&(this.image.src=`${t}/assets/doodle.png`),this.x<0?this.x=0:this.x+this.width>this.game.gameContainer.offsetWidth&&(this.x=this.game.gameContainer.offsetWidth-this.width),this.y<this.game.gameContainer.offsetHeight/2&&this.moveY<0&&(this.game.viewportOffset-=this.moveY,this.y-=this.moveY,this.game.platformManager.scrollPlatformsDown(-this.moveY),this.game.increaseScore(-this.moveY)),this.y>this.game.gameContainer.offsetHeight&&this.game.gameOver(),this.updatePosition()}jump(){this.moveY=this.jumpForce}}class l{constructor(t,i,o,e,s="normal",a){this.x=t,this.y=i,this.width=o,this.height=e,this.type=s,this.game=a,this.isMoving=s==="moving",this.moveSpeed=1,this.moveDirection=Math.random()<.5?-1:1,this.platformDiv=document.createElement("div"),this.platformDiv.className="platform platform-"+s,this.platformDiv.style.width=o+"px",this.platformDiv.style.height=e+"px",this.platformDiv.style.left=t+"px",this.platformDiv.style.top=i+"px";const h="/Doodle-Jump-Clone/";this.platformDiv.style.backgroundImage=`url('${h}/assets/platform-${s}.png')`,s==="spring"&&(this.springElement=document.createElement("div"),this.springElement.className="spring",this.springElement.style.left=o/2-10+"px",this.springElement.style.top="-10px",this.element.appendChild(this.springElement)),a.gameScreen.appendChild(this.platformDiv)}updatePosition(){this.platformDiv.style.left=this.x+"px",this.platformDiv.style.top=this.y+"px"}remove(){this.platformDiv.remove()}updateMovement(){this.isMoving&&(this.x+=this.moveSpeed*this.moveDirection,this.x<=0?this.moveDirection=1:this.x+this.width>=this.game.gameContainer.offsetWidth&&(this.moveDirection=-1),this.updatePosition())}}class g{constructor(t){this.game=t,this.platforms=[]}createInitialPlatforms(){this.platforms.push(new l(this.game.gameContainer.offsetWidth/2-50,this.game.gameContainer.offsetHeight-50,100,20,"normal",this.game));for(let t=0;t<7;t++){let i=Math.random()*(this.game.gameContainer.offsetWidth-100),o=this.game.gameContainer.offsetHeight-150-t*80,e=Math.random()<.2?"moving":"normal";this.platforms.push(new l(i,o,100,30,e,this.game))}}updatePlatforms(){this.platforms.forEach(t=>{t.updateMovement()});for(let t=0;t<this.platforms.length;t++){const i=this.platforms[t];if(i.y>this.game.gameContainer.offsetHeight){let o=this.platforms.reduce((m,f)=>f.y<m?f.y:m,this.game.gameContainer.offsetHeight);const e=this.game.gameContainer.offsetWidth;let s;const a=Math.random();a<.4?s=Math.random()*(e/3):a<.8?s=e*2/3+Math.random()*(e/3)-100:s=e/3+Math.random()*(e/3),s=Math.max(0,Math.min(s,e-100));let h=o-90,r=Math.random()<.2?"moving":"normal";if(i.x=s,i.y=h,i.type!==r){i.type=r,i.isMoving=r==="moving",i.platformDiv.className="platform platform-"+r;const m="/Doodle-Jump-Clone/";i.platformDiv.style.backgroundImage=`url('${m}/assets/platform-${r}.png')`}i.updatePosition()}}for(;this.platforms.length<10;){const t=this.game.gameContainer.offsetWidth;let i;const o=Math.random();o<.4?i=Math.random()*(t/3):o<.8?i=t*2/3+Math.random()*(t/3)-100:i=t/3+Math.random()*(t/3),i=Math.max(0,Math.min(i,t-100));let s=this.platforms.reduce((h,r)=>r.y<h?r.y:h,this.game.gameContainer.offsetHeight)-90,a=Math.random()<.2?"moving":"normal";this.platforms.push(new l(i,s,100,30,a,this.game))}}scrollPlatformsDown(t){this.platforms.forEach(i=>{i.y+=t,i.updatePosition()})}checkCollisions(t){if(t.moveY>0){const i=t.PlayerDiv.getBoundingClientRect();this.platforms.forEach(o=>{const e=o.platformDiv.getBoundingClientRect();i.right>e.left&&i.left<e.right&&i.bottom>e.top&&i.bottom-t.moveY<=e.top&&(t.y=o.y-t.height,t.jump())})}}resetPlatforms(){this.platforms.forEach(t=>t.remove()),this.platforms=[],this.createInitialPlatforms()}}class d{constructor(t){this.game=t,this.scoreElement=document.getElementById("score"),this.gameOverElement=document.getElementById("game-over"),this.finalScoreElement=this.gameOverElement.querySelector(".final-score"),this.restartButton=document.getElementById("restart-button"),this.setupEventListeners()}setupEventListeners(){this.restartButton.addEventListener("click",()=>{this.hideGameOver(),this.game.restart()})}updateScore(){this.scoreElement.textContent=Math.floor(this.game.score)}showGameOver(t){this.finalScoreElement.textContent="Score: "+Math.floor(t),this.gameOverElement.classList.remove("hidden")}hideGameOver(){this.gameOverElement.classList.add("hidden")}}class p{constructor(){this.gameRunning=!1,this.score=0,this.viewportOffset=0,this.gravity=.5,this.gameContainer=null,this.gameScreen=null,this.player=null,this.platformManager=null,this.ui=null}init(){this.gameContainer=document.getElementById("game-container"),this.gameScreen=document.getElementById("game-screen"),this.ui=new d(this),this.platformManager=new g(this),this.player=new c(this.gameContainer.offsetWidth/2-15,this.gameContainer.offsetHeight-100,30,30,this),this.ui.updateScore(),this.platformManager.createInitialPlatforms(),this.gameRunning=!0,this.gameLoop()}gameLoop(){this.gameRunning&&(this.player.update(),this.platformManager.updatePlatforms(),this.platformManager.checkCollisions(this.player),requestAnimationFrame(()=>this.gameLoop()))}increaseScore(t){this.score+=t,this.ui.updateScore()}gameOver(){this.gameRunning=!1,this.ui.showGameOver(this.score),this.player.x=this.gameContainer.offsetWidth/2-this.player.width/2,this.player.y=this.gameContainer.offsetHeight-100,this.player.moveY=0,this.player.moveX=0,this.player.updatePosition();const t=localStorage.getItem("highScore")||0;this.score>t&&(this.ui.finalScoreElement.textContent="New High Score: "+Math.floor(this.score),localStorage.setItem("highScore",Math.floor(this.score)))}restart(){this.score=0,this.ui.updateScore(),this.platformManager.resetPlatforms(),this.gameRunning=!0,this.gameLoop()}}document.addEventListener("DOMContentLoaded",()=>{const n=new p,t=document.getElementById("menu-container"),i=document.getElementById("game-container");document.getElementById("start-button").addEventListener("click",function(){t.classList.add("hidden"),i.classList.remove("hidden"),n.init()})});
